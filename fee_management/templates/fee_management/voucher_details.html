<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div>
        <h3 class="text-lg font-medium mb-2">Student Information</h3>
        <div class="space-y-2">
            <p><span class="font-medium">Name:</span> {{ student.applicant.full_name }}</p>
            <p><span class="font-medium">Roll No:</span> {{ student.university_roll_no }}</p>
            <p><span class="font-medium">Program:</span> {{ student.program.name }}</p>
            <p><span class="font-medium">Session:</span> {{ student.applicant.session.name }}</p>
            <p><span class="font-medium">Semester:</span> {{ voucher.semester.name }}</p>
        </div>
    </div>
    <div>
        <h3 class="text-lg font-medium mb-2">Payment Details</h3>
        <div class="space-y-2">
            <p><span class="font-medium">Voucher ID:</span> {{ voucher.voucher_id }}</p>
            <p><span class="font-medium">Fee Type:</span> {{ voucher.semester_fee.fee_type.name }}</p>
            <p><span class="font-medium">Due Date:</span> {{ voucher.due_date|date:"d M Y" }}</p>
            <p><span class="font-medium">Status:</span> 
                {% if voucher.is_paid %}
                    <span class="badge badge-success">Paid on {{ voucher.paid_at|date:"d M Y" }}</span>
                {% else %}
                    <span class="badge badge-warning">Pending</span>
                {% endif %}
            </p>
            {% if voucher.payment %}
            <p><span class="font-medium">Receipt #:</span> {{ voucher.payment.receipt_number }}</p>
            {% elif not voucher.is_paid %}
            <button class="btn btn-success verify-payment mt-4" data-voucher-id="{{ voucher.voucher_id }}">
                <i class="fas fa-check-circle"></i> Mark as Paid
            </button>
            {% endif %}
        </div>
    </div>
</div>

<div class="mt-6">
    <h3 class="text-lg font-medium mb-2">Fee Breakdown</h3>
    <div class="overflow-x-auto">
        <table class="table table-zebra w-full">
            <thead>
                <tr>
                    <th>Description</th>
                    <th class="text-right">Amount (PKR)</th>
                </tr>
            </thead>
            <tbody>
                {% for head, amount in dynamic_fees.items %}
                <tr {% if head == late_fee_type %}class="bg-yellow-50 font-semibold"{% endif %}>
                    <td>{{ head }}</td>
                    <td class="text-right">{{ amount|floatformat:2 }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td>Semester Fee</td>
                    <td class="text-right">{{ semester_fee.total_amount|floatformat:2 }}</td>
                </tr>
                {% endfor %}
                {% if late_fee_type %}
                <tr class="font-semibold">
                    <td>{{ late_fee_type }}</td>
                    <td class="text-right">{{ late_fee_amount|floatformat:2 }}</td>
                </tr>
                {% endif %}
                <tr class="font-bold border-t-2 border-gray-300">
                    <td class="pt-2">Total Amount</td>
                    <td class="text-right pt-2">PKR {{ total_amount|floatformat:2 }}</td>
                </tr>
                {% if due_passed and not voucher.is_paid %}
                <tr>
                    <td colspan="2" class="text-sm text-red-600 pt-2">
                        <i class="fas fa-exclamation-triangle mr-1"></i>
                        This voucher is overdue since {{ voucher.due_date|date:"d M Y" }}
                    </td>
                </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>