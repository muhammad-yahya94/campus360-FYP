{% extends 'base_student.html' %}

{% block title %}Student Dashboard - {{ student.applicant.full_name }}{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
  <!-- Hero Section -->
  <div class="hero bg-base-200 rounded-lg shadow-lg mb-6">
    <div class="hero-content text-center">
      <div class="max-w-md">
        <h1 class="text-3xl sm:text-4xl font-bold text-base-content mb-2">Student Dashboard</h1>
        <p class="text-base sm:text-lg text-base-content/90">Welcome, {{ student.applicant.full_name }}! Explore your courses for {{ active_semester.name|default:"current semester" }}.</p>
      </div>
    </div>
  </div>

  <!-- Notices Section -->
  <div class="card bg-base-100 shadow-lg rounded-lg mb-6">
    <div class="card-body">
      <h2 class="card-title text-2xl text-base-content mb-4">Recent Notices</h2>
      <div class="space-y-3">
        {% for notice in notices %}
        <div class="flex items-center justify-between p-3 bg-base-200 rounded-lg">
          <div class="flex-1">
            <p class="text-base-content font-medium truncate">{{ notice.title }}</p>
            <p class="text-sm text-base-content/70 truncate">{{ notice.content|truncatewords:10 }}</p>
          </div>
          <div class="text-sm text-base-content/70">
            {{ notice.created_at|timesince }} ago
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- Enrolled Courses -->
  {% if enrollments %}
    <div class="card bg-base-100 shadow-lg rounded-lg overflow-hidden mb-6">
      <div class="card-body">
        <h2 class="card-title text-2xl text-base-content mb-4">Courses for {{ active_semester.name|default:"Current Semester" }}</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
          {% for enrollment in enrollments %}
          <div class="card bg-base-100 shadow-md hover:shadow-lg transition-shadow">
            <div class="card-body">
              <h3 class="text-lg font-medium text-base-content">{{ enrollment.course_offering.course.code }} - {{ enrollment.course_offering.course.name }}</h3>
              <p class="text-sm text-base-content/70">Semester: {{ enrollment.course_offering.semester.name }}</p>
              <p class="text-sm text-base-content/70">Instructor: {{ enrollment.course_offering.teacher.user.get_full_name }}</p>
              <p class="text-sm text-base-content/70">Type: {{ enrollment.course_offering.get_offering_type_display }}</p>
              <div class="card-actions mt-4 flex flex-wrap gap-2">
                <a href="{% url 'students:study_materials' enrollment.course_offering.id %}"
                   class="btn btn-sm btn-primary">Course Content</a>
                <a href="{% url 'students:assignments' enrollment.course_offering.id %}"
                   class="btn btn-sm btn-secondary">Assignments</a>
                <a href="{% url 'students:attendance' enrollment.course_offering.id %}"
                   class="btn btn-sm btn-warning">Attendance</a>
                <a href="{% url 'students:solve_quiz' enrollment.course_offering.id %}"
                   class="btn btn-sm btn-info">Quizzes</a>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  {% else %}
    <div class="alert alert-info shadow-lg mb-6">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      <span>You have no enrolled courses for {{ active_semester.name|default:"the current semester" }}.</span>
    </div>
  {% endif %}

  <!-- Quick Actions -->
  <div class="card bg-base-100 shadow-lg rounded-lg">
    <div class="card-body">
      <h2 class="card-title text-2xl text-base-content mb-4">Quick Actions</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <a href="{% url "students:settings" %}" class="btn btn-primary">View Settings</a>
        <a href="{% url 'students:my_courses' %}" class="btn btn-success">My Courses</a>
        <a href="{% url 'students:attendance_stats' %}" class="btn btn-accent">Attendance Stats</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}