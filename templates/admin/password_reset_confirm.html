{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" href="{% static "admin/css/forms.css" %}">
<style>
    .password-reset {
        max-width: 500px;
        margin: 40px auto;
        padding: 30px;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .password-reset h1 {
        color: #333;
        margin-bottom: 20px;
    }
    .form-row {
        margin-bottom: 20px;
    }
    .form-row label {
        display: block;
        margin-bottom: 5px;
        font-weight: 600;
    }
    .form-row input[type="password"] {
        width: 100%;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
    }
    .errorlist {
        color: #ba2121;
        margin: 0 0 10px 0;
        padding: 0;
    }
    .errorlist li {
        list-style: none;
        font-size: 13px;
    }
    .submit-row {
        padding: 10px 0;
        text-align: right;
    }
    .submit-row input[type="submit"] {
        background: #79aec8;
        padding: 10px 15px;
        border: none;
        border-radius: 4px;
        color: #fff;
        cursor: pointer;
    }
    .submit-row input[type="submit"]:hover {
        background: #609ab6;
    }
</style>
{% endblock %}

{% block content %}
{% if validlink %}
<div class="password-reset">
    <h1>{% translate 'Enter new password' %}</h1>
    <p>{% translate 'Please enter your new password twice so we can verify you typed it in correctly.' %}</p>
    
    <form method="post">
        {% csrf_token %}
        <fieldset class="module aligned">
            <div class="form-row">
                {{ form.new_password1.errors }}
                <label for="id_new_password1">{% translate 'New password:' %}</label>
                {{ form.new_password1 }}
            </div>
            <div class="form-row">
                {{ form.new_password2.errors }}
                <label for="id_new_password2">{% translate 'Confirm password:' %}</label>
                {{ form.new_password2 }}
            </div>
            <div class="submit-row">
                <input type="submit" value="{% translate 'Change my password' %}">
            </div>
        </fieldset>
    </form>
</div>
{% else %}
<div class="password-reset">
    <h1>{% translate 'Password reset unsuccessful' %}</h1>
    <p>{% translate 'The password reset link was invalid, possibly because it has already been used. Please request a new password reset.' %}</p>
    <p class="login-link">
        <a href="{% url 'admin:password_reset' %}">{% translate 'Request new password reset' %}</a>
    </p>
</div>
{% endif %}
{% endblock %}
